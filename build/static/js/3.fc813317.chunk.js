(this["webpackJsonpchipp-final"]=this["webpackJsonpchipp-final"]||[]).push([[3],{219:function(e,a,t){},220:function(e,a,t){},221:function(e,a,t){},222:function(e,a,t){},223:function(e,a,t){},224:function(e,a,t){},225:function(e,a,t){},226:function(e,a,t){},227:function(e,a,t){},228:function(e,a,t){},233:function(e,a,t){"use strict";t.r(a);var n=t(7),c=t.n(n),r=t(12),s=t(4),i=t(1),o=t(19),l=t(20),d=t(62),u=t(11),j=(t(219),t(0)),b=function(e){var a=Object(i.useContext)(l.a),t=Object(i.useState)(),n=Object(s.a)(t,2),d=n[0],b=n[1],p=Object(o.a)(),h=(p.isLoading,p.error,p.sendRequest);p.clearError;return Object(i.useEffect)((function(){(function(){var t=Object(r.a)(c.a.mark((function t(){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h("https://chipp-temp-backend.herokuapp.com"+"/api/fundraiser/".concat(e.fundraiser),"GET",null,{Authorization:"Bearer "+a.token});case 3:n=t.sent,b(n),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}})()()}),[h,e.fundraiser]),Object(j.jsx)(j.Fragment,{children:d&&Object(j.jsxs)("div",{className:"donation-item__container",children:[Object(j.jsx)("img",{src:"".concat("https://chipp-temp-backend.herokuapp.com","/").concat(d.fundraiser.image),alt:"Can't be loaded"}),Object(j.jsxs)("div",{children:[Object(j.jsx)(u.b,{to:"/fundraiser/".concat(d.fundraiser.id),children:Object(j.jsx)("p",{children:d.fundraiser.title})}),Object(j.jsxs)("p",{className:"donation-item__donated-amt",children:["Donated: ",Object(j.jsx)("i",{class:"fas fa-rupee-sign"})," ",e.donatedAmount]}),Object(j.jsx)("p",{className:"donation-item__transaction-id",children:"Transaction ID: OD116221221159111000"})]})]})})},p=(t(220),function(e){var a=Object(i.useState)(),t=Object(s.a)(a,2),n=(t[0],t[1],Object(o.a)());n.isLoading,n.error,n.sendRequest,n.clearError;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:"donations-content__heading",children:"My Donations"}),Object(j.jsx)("div",{className:"donations-content__container",children:e.userInfo.user.donations.map((function(e){return Object(j.jsx)(b,{fundraiser:e.fundraiser,donatedAmount:e.donatedAmount},e.id)}))})]})}),h=t(59),m=t(39),O=(t(221),function(e){var a,t,n=Object(i.useContext)(l.a),d=Object(i.useState)(),u=Object(s.a)(d,2),b=u[0],p=u[1],O=Object(o.a)(),f=O.isLoading,x=(O.error,O.sendRequest);O.clearError;Object(i.useEffect)((function(){(function(){var a=Object(r.a)(c.a.mark((function a(){var t;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,x("https://chipp-temp-backend.herokuapp.com"+"/api/fundraiser/user/".concat(e.userId),"GET",null,{Authorization:"Bearer "+n.token});case 3:t=a.sent,p(t.fundraisers),a.next=9;break;case 7:a.prev=7,a.t0=a.catch(0);case 9:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(){return a.apply(this,arguments)}})()()}),[x,e.userId]),!f&&b&&(t="id",a=b.sort((function(e,a){var n=e[t],c=a[t];return n>c?-1:n<c?1:0})));var v=function(e){window.location.reload()};return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(h.a,{classes:"fundraisers-content__container",heading:"My Fundraisers",children:!f&&b&&a.map((function(e){return Object(j.jsx)(m.a,{disabled:!e.active,id:e.id,image:e.cover,pincode:e.pincode,title:e.title,description:e.description,amount:e.amount,collectionAmt:e.collectionAmt,onDelete:v,edit:!0},e.id)}))})})}),f=t(34),x=t(9),v=t(210),g=t(10),_=(t(222),t(25)),k=function(e){var a=Object(o.a)(),t=a.isLoading,n=a.error,l=a.sendRequest,d=(a.clearError,Object(i.useState)({name:"",email:"",phone:""})),b=Object(s.a)(d,2),p=b[0],h=b[1],m=Object(i.useState)({}),O=Object(s.a)(m,2),k=O[0],w=O[1],C=function(){var e={};return e.phone=0===p.phone.length||!isNaN(p.phone)&&10===p.phone.length?"":"*Invalid Field",e.email=0===p.email.length||/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(p.email)?"":"Email is not valid",w(Object(x.a)({},e)),Object.values(e).every((function(e){return""===e}))},y=function(e){var a=e.target,t=a.name,n=a.value;h(Object(x.a)(Object(x.a)({},p),{},Object(f.a)({},t,n)))},N=function(){var a=Object(r.a)(c.a.mark((function a(t){return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t.preventDefault(),0!==p.name.length||0!==p.email.length||0!==p.phone.length){a.next=5;break}alert("You have not entered any update"),a.next=16;break;case 5:if(!C()){a.next=16;break}return a.prev=6,a.next=9,l("https://chipp-temp-backend.herokuapp.com/api/user/updateprofiledetails","PATCH",JSON.stringify({id:e.userId,name:p.name,email:p.email,phone:p.phone}),{"Content-Type":"application/json"});case 9:a.sent,window.location.reload(),a.next=16;break;case 13:a.prev=13,a.t0=a.catch(6),console.log(a.t0);case 16:case"end":return a.stop()}}),a,null,[[6,13]])})));return function(e){return a.apply(this,arguments)}}();return Object(j.jsxs)(j.Fragment,{children:[t&&Object(j.jsx)(_.a,{asOverlay:!0}),!t&&Object(j.jsxs)("form",{onSubmit:N,children:[n&&Object(j.jsx)("p",{children:n}),Object(j.jsx)(v.a,Object(x.a)(Object(x.a)({className:"profile-details__text-field",variant:"outlined",label:"Name",value:p.name,name:"name"},k.name&&{error:!0,helperText:k.name}),{},{onChange:y})),Object(j.jsx)(v.a,Object(x.a)(Object(x.a)({className:"profile-details__text-field",variant:"outlined",label:"E-Mail",value:p.email,name:"email"},k.email&&{error:!0,helperText:k.email}),{},{onChange:y})),Object(j.jsx)(v.a,Object(x.a)(Object(x.a)({className:"profile-details__text-field",variant:"outlined",label:"Phone",value:p.phone,name:"phone"},k.phone&&{error:!0,helperText:k.phone}),{},{onChange:y})),Object(j.jsxs)("div",{className:"profile-details__btn-section",children:[Object(j.jsx)(u.b,{to:"/",children:Object(j.jsx)(g.a,{div:!0,children:"Cancel"})}),Object(j.jsx)(g.a,{dark:!0,type:"submit",children:"Update"})]})]})]})},w=t(17),C=t(80),y=t(213),N=t(27),P=(t(98),function(e){var a=Object(i.useRef)(),t=Object(i.useState)(null),n=Object(s.a)(t,2),c=n[0],r=n[1],o=Object(i.useState)(null),l=Object(s.a)(o,2),d=(l[0],l[1]),u=Object(i.useState)({x:0,y:0}),b=Object(s.a)(u,2),p=b[0],h=b[1],m=Object(i.useState)(1),O=Object(s.a)(m,2),f=O[0],x=O[1];return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(N.a,{show:e.showModal,onCancel:e.onCancel,className:"profile-pic-modal__modal-container",header:Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("div",{className:"fundraiser-category-modal__header",children:"Upload Photo"})}),footerClass:"fundraiser-category-modal__footer",children:Object(j.jsxs)("div",{className:"profile-pic-modal__main-container",children:[c&&Object(j.jsxs)("div",{className:"profile-pic-modal__cropper-container",children:[Object(j.jsx)("div",{className:"profile-pic-modal__cropper",children:Object(j.jsx)(C.a,{image:c,crop:p,zoom:f,minZoom:1,maxZoom:3,showGrid:!1,aspect:1,onCropChange:h,onZoomChange:x,onCropComplete:function(e,a){d(a)}})}),Object(j.jsx)("div",{className:"profile-pic-modal__slider",children:Object(j.jsx)(y.a,{min:1,max:3,step:.01,value:f,onChange:function(e,a){return x(a)}})})]}),Object(j.jsx)("div",{className:"profile-pic-modal__controls",children:Object(j.jsxs)("div",{className:"profile-pic-modal__buttons",children:[Object(j.jsx)("input",{type:"file",accept:".jpg,.png,.jpeg",ref:a,style:{display:"none"},onChange:function(e){if(e.target.files&&e.target.files.length>0){var a=new FileReader;a.readAsDataURL(e.target.files[0]),a.addEventListener("load",(function(){r(a.result)}))}}}),!c&&Object(j.jsx)(g.a,{dark:!0,div:!0,onClick:function(){return a.current.click()},children:"Choose"}),c&&Object(j.jsx)(g.a,{dark:!0,div:!0,children:"Confirm"}),Object(j.jsx)(g.a,{div:!0,onClick:e.onCancel,children:"Cancel"})]})})]})})})}),I=(t(223),function(e){var a=Object(i.useState)(!1),t=Object(s.a)(a,2),n=t[0],c=t[1];return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(P,{showModal:n,onCancel:function(){c(!1)},onConfirm:function(){c(!1)},signup:e.signup}),Object(j.jsxs)("div",{className:"profile-pic__main-container ".concat(e.classes),type:e.type,onClick:function(){c(!0)},disabled:e.disabled,children:[e.children,Object(j.jsx)("div",{className:"profile-pic__add-icon",children:Object(j.jsx)("i",{class:"fas fa-plus"})})]})]})}),S=(t(224),function(e){return Object(j.jsx)("div",{className:"menuitem__container ".concat(e.classes),onClick:e.onClick,children:e.itemname})}),A=(t(225),function(e){var a=Object(i.useContext)(l.a),t=Object(i.useState)(""),n=Object(s.a)(t,2),c=n[0],r=n[1],o=Object(w.g)(),d=function(a){r(a),e.onClick(a)};return Object(j.jsxs)("div",{className:"sidebar__main-container ".concat(e.classes),children:[Object(j.jsxs)("div",{className:"sidebar__user-info",children:[Object(j.jsx)(I,{children:Object(j.jsx)("img",{style:{objectFit:"contain",height:"100%",width:"100%",borderRadius:"100px"},src:"/images/avatar.jpg",alt:"Profile Pic"})}),Object(j.jsx)("div",{className:"user-name",children:Object(j.jsx)("strong",{children:e.userInfo.user.name})})]}),Object(j.jsxs)("div",{className:"sidebar__menu-container",children:[Object(j.jsx)("div",{className:"sidebar__heading",children:"DASHBOARD"}),Object(j.jsxs)("div",{className:"sidebar__menu",children:[Object(j.jsx)(S,{classes:"kyc"===c?"active":"",itemname:"Verify KYC",onClick:function(){return d("kyc")}}),Object(j.jsx)(S,{classes:"fundraisers"===c?"active":"",itemname:"My Fundraisers",onClick:function(){return d("fundraisers")}}),Object(j.jsx)(S,{classes:"donations"===c?"active":"",itemname:"My Donations",onClick:function(){return d("donations")}}),Object(j.jsx)(S,{classes:"profile"===c?"active":"",itemname:"Profile Details",onClick:function(){return d("profile")}}),Object(j.jsx)(S,{classes:"password"===c?"active":"",itemname:"Change Password",onClick:function(){return d("password")}}),Object(j.jsx)(S,{itemname:"Logout",onClick:function(){a.logout(),o.push("/"),window.location.reload()}})]})]})]})}),F=(t(226),t(227),{currentPass:"",newPass:"",confirmPass:""}),T=function(e){var a=Object(i.useState)(),t=Object(s.a)(a,2),n=(t[0],t[1]),l=Object(o.a)(),d=(l.isLoading,l.error),b=l.sendRequest,p=(l.clearError,Object(w.g)()),h=Object(i.useState)(F),m=Object(s.a)(h,2),O=m[0],_=m[1],k=Object(i.useState)({}),C=Object(s.a)(k,2),y=C[0],N=C[1],P=function(){N({});var e={};return e.currentPass=O.currentPass?"":"*Invalid Field",e.newPass=O.newPass.length>5?"":"*Invalid Field (Min. 6 characters)",e.confirmPass=O.confirmPass?"":"*Invalid Field",O.confirmPass&&(e.confirmPass=O.confirmPass===O.newPass?"":"*Passwords doesn't match"),N(Object(x.a)({},e)),Object.values(e).every((function(e){return""===e}))},I=function(){var a=Object(r.a)(c.a.mark((function a(t){var r;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t.preventDefault(),!e.isLoggedIn||!P()){a.next=13;break}return a.prev=2,a.next=5,b("https://chipp-temp-backend.herokuapp.com/api/user/changePassword","PATCH",JSON.stringify({email:e.userInfo.user.email,currPass:O.currentPass,newPass:O.newPass}),{"Content-Type":"application/json"});case 5:r=a.sent,n(r),p.push("/"),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(2),console.log(a.t0);case 13:case"end":return a.stop()}}),a,null,[[2,10]])})));return function(e){return a.apply(this,arguments)}}(),S=function(e){var a=e.target,t=a.name,n=a.value;_(Object(x.a)(Object(x.a)({},O),{},Object(f.a)({},t,n)))};return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:"change-password__header",children:Object(j.jsx)("h3",{children:"Change Password"})}),Object(j.jsx)("div",{className:"change-password__form-container",children:Object(j.jsxs)("form",{onSubmit:I,children:[d&&Object(j.jsx)("p",{className:"change-password__error",children:d}),Object(j.jsx)(v.a,Object(x.a)(Object(x.a)({className:"change-password__text-field",variant:"outlined",label:"Current Password",type:"password",value:O.currentPass,name:"currentPass"},y.currentPass&&{error:!0,helperText:y.currentPass}),{},{onChange:S})),Object(j.jsx)(v.a,Object(x.a)(Object(x.a)({className:"change-password__text-field",variant:"outlined",label:"New Password",type:"password",value:O.newPass,name:"newPass"},y.newPass&&{error:!0,helperText:y.newPass}),{},{onChange:S})),Object(j.jsx)(v.a,Object(x.a)(Object(x.a)({className:"change-password__text-field",variant:"outlined",label:"Confirm New Password",type:"password",value:O.confirmPass,name:"confirmPass"},y.confirmPass&&{error:!0,helperText:y.confirmPass}),{},{onChange:S})),Object(j.jsxs)("div",{className:"change-password__btn-section",children:[Object(j.jsx)(u.b,{to:"/",children:Object(j.jsx)(g.a,{div:!0,children:"Cancel"})}),Object(j.jsx)(g.a,{dark:!0,type:"submit",children:"Update"})]})]})})]})},D=t(44),E=(t(228),function(e){var a=Object(i.useContext)(l.a),t=Object(o.a)(),n=t.isLoading,d=(t.error,t.sendRequest),b=(t.clearError,Object(i.useState)(!1)),p=Object(s.a)(b,2),h=p[0],m=p[1],O=Object(i.useState)(!0),v=Object(s.a)(O,2),k=v[0],w=v[1],C=Object(i.useState)({aadharcard:null,pancard:null,userimage:null}),y=Object(s.a)(C,2),N=y[0],P=y[1],I=Object(i.useState)({}),S=Object(s.a)(I,2),A=(S[0],S[1],function(e,a){P(Object(x.a)(Object(x.a)({},N),{},Object(f.a)({},e,a)))}),F=function(){var t=Object(r.a)(c.a.mark((function t(n){var r,s,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),console.log(N),!(null!==N.aadharcard&&null!==N.pancard&&null!==N.userimage?(w(!0),1):(w(!1),0))){t.next=40;break}return t.prev=3,(r=new FormData).append("userId",e.userId),r.append("aadhar",N.aadharcard),t.next=9,d("".concat("https://chipp-temp-backend.herokuapp.com","/api/user/kyc/aadhar"),"PATCH",r,{Authorization:"Bearer "+a.token});case 9:t.sent,t.next=15;break;case 12:t.prev=12,t.t0=t.catch(3),console.log(t.t0);case 15:return t.prev=15,(s=new FormData).append("userId",e.userId),s.append("pancard",N.aadharcard),t.next=21,d("".concat("https://chipp-temp-backend.herokuapp.com","/api/user/kyc/pancard"),"PATCH",s,{Authorization:"Bearer "+a.token});case 21:t.sent,t.next=27;break;case 24:t.prev=24,t.t1=t.catch(15),console.log(t.t1);case 27:return t.prev=27,(i=new FormData).append("userId",e.userId),i.append("userimage",N.userimage),t.next=33,d("".concat("https://chipp-temp-backend.herokuapp.com","/api/user/kyc/userimage"),"PATCH",i,{Authorization:"Bearer "+a.token});case 33:t.sent,m(!0),t.next=40;break;case 37:t.prev=37,t.t2=t.catch(27),console.log(t.t2);case 40:case"end":return t.stop()}}),t,null,[[3,12],[15,24],[27,37]])})));return function(e){return t.apply(this,arguments)}}();return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:"verify-kyc__header",children:"Verify KYC"}),n&&Object(j.jsx)(_.a,{asOverlay:!0}),!h&&!n&&Object(j.jsxs)("div",{className:"verify-kyc__form-container",children:[Object(j.jsx)("div",{className:"verify-kyc__custom-label",children:"Upload Aadhar Card*"}),Object(j.jsx)(D.a,{preview:!0,id:"aadharcard",center:!0,quality:"0.8",onInput:A,children:N.aadharcard?"Change Image":"Pick Image"}),Object(j.jsx)("div",{className:"verify-kyc__custom-label",children:"Upload Pan Card*"}),Object(j.jsx)(D.a,{preview:!0,id:"pancard",center:!0,quality:"0.8",onInput:A,children:"Pick Image"}),Object(j.jsx)("div",{className:"verify-kyc__custom-label",children:"Upload your photo holding aadhar card (face must be visible)*"}),Object(j.jsx)(D.a,{preview:!0,id:"userimage",center:!0,quality:"0.8",onInput:A,children:"Pick Image"}),!k&&Object(j.jsx)("div",{className:"verify-kyc__error",children:Object(j.jsx)("p",{children:"*Please upload all the required documents"})}),Object(j.jsxs)("div",{className:"verify-kyc__button-container",children:[Object(j.jsx)(u.b,{to:"/",children:Object(j.jsx)(g.a,{div:!0,children:"Cancel"})}),Object(j.jsx)(g.a,{div:!0,dark:!0,classes:"submit-btn",onClick:F,children:"Submit"})]})]}),h&&Object(j.jsx)("div",{className:"verify-kyc__upload-successful",children:Object(j.jsxs)("h3",{children:["KYC Verified ",Object(j.jsx)("i",{class:"fas fa-check-circle"})]})})]})});a.default=function(e){var a=Object(i.useContext)(l.a),t=Object(o.a)(),n=(t.isLoading,t.error,t.sendRequest),u=(t.clearError,Object(i.useState)()),b=Object(s.a)(u,2),h=b[0],m=b[1],f=Object(i.useState)(!0),x=Object(s.a)(f,2),v=x[0],g=x[1],_=Object(i.useState)(""),w=Object(s.a)(_,2),C=w[0],y=w[1];return Object(i.useEffect)((function(){(function(){var e=Object(r.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n("https://chipp-temp-backend.herokuapp.com"+"/api/user/".concat(a.userId),"GET",null,{Authorization:"Bearer "+a.token});case 3:t=e.sent,m(t),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[n,a.userId]),Object(j.jsx)(j.Fragment,{children:h&&Object(j.jsx)("div",{className:"dashboard__body",children:Object(j.jsxs)("div",{className:"dashboard__main-container",children:[Object(j.jsx)(A,{userInfo:h,classes:v?"dashboard__sidebar-container":"dashboard__sidebar-container dashboard-hide",onClick:function(e){y(e),g(!1)}}),Object(j.jsxs)("div",{className:v?"dashboard__content-container dashboard-hide":"dashboard__content-container",children:[Object(j.jsx)(d.a,{classes:"dashboard__go-back-btn",onClick:function(){return g(!0)}}),"kyc"===C&&Object(j.jsx)(E,{userInfo:h,userId:a.userId}),"fundraisers"===C&&Object(j.jsx)(O,{userInfo:h,userId:a.userId}),"donations"===C&&Object(j.jsx)(p,{userInfo:h,userId:a.userId}),"profile"===C&&Object(j.jsx)(k,{userInfo:h,userId:a.userId}),"password"===C&&Object(j.jsx)(T,{userInfo:h,userId:a.userId,isLoggedIn:a.isLoggedIn})]})]})})})}}}]);
//# sourceMappingURL=3.fc813317.chunk.js.map